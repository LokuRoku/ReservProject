webpackJsonp([0],{"26/9":function(t,e,n){"use strict";(function(t){var o=n("4fmV");e.a={name:"SongsMenu",components:{ActualVideo:o.a},data:function(){return{songs:"",tumbnail:"",interval:0,letter:"",songs_list:"",alpabet:""}},created:function(){var e=this;this.getAlphabet(),this.ShowSong(),t.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),setInterval(function(){e.ShowSong()},5e3)},beforeDestroy:function(){},beforeUpdate:function(){},methods:{ShowSong:function(){var e=this;t.ajax({url:"http://176.99.11.247/api/vi/radio/songquery/",type:"GET",success:function(t){e.songs=t.data.data},error:function(t){console.log(t)}})},getTumbnail:function(t){video=t,id_video=video.substring(32),tumbnail="http://img.youtube.com/vi/"+id_video+"/0.jpg",this.tumbnail=tumbnail},getAlphabet:function(){this.alpabet=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0-9"]},getSongs:function(e){var n=this;this.letter==e?(this.letter="",this.songs_list=""):t.ajax({url:"http://176.99.11.247/api/vi/radio/songs/?letter="+e,type:"GET",success:function(t){n.songs_list=t.data.data,n.letter=e},error:function(t){n.letter="",n.songs_list="",console.log(t)}})},plusFoSong:function(e){var n=this;t.ajax({url:"http://176.99.11.247/api/vi/radio/songquery/",type:"POST",data:{song:e.id},success:function(t){n.ShowSong()},error:function(t){console.log(t)}})},addSong:function(e){var n=this;t.ajax({url:"http://176.99.11.247/api/vi/radio/addsong/",type:"POST",data:{song:e.id},success:function(t){n.ShowSong()},error:function(t){console.log(t)}})}}}}).call(e,n("7t+N"))},"2iBU":function(t,e){},"4fmV":function(t,e,n){"use strict";var o=n("684s"),a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.play?n("iframe",{attrs:{width:"550",height:"320",src:t.actualsrc,frameborder:"0"}}):n("img",{attrs:{src:"http://ipic.su/img/img7/fs/playbutton.1560260934.png"},on:{click:function(e){return t.VideoShow(!0)}}})])},staticRenderFns:[]};var i=function(t){n("tle6")},s=n("VU/8")(o.a,a,!1,i,"data-v-46affcf6",null);e.a=s.exports},"4jld":function(t,e,n){"use strict";(function(t){e.a={name:"Registration",data:function(){return{login:"",password:""}},methods:{setLogin:function(){var e=this;t.ajax({url:"http://176.99.11.247/api/vi/radio/createuser/",type:"POST",data:{username:this.login,password:this.password},success:function(t){alert("Регистрация произведена успешно!"),e.$router.push({name:"login"})},error:function(t){400===t.status&&alert("Произошла ошибка!")}})}}}}).call(e,n("7t+N"))},"684s":function(t,e,n){"use strict";(function(t){e.a={name:"ActualVideo",data:function(){return{videoid:"",timer:"",duration:"",actualsrc:"",play:!1}},created:function(){var t=this;setInterval(function(){t.VideoShow(!1)},4e3)},beforeDestroy:function(){},beforeUpdate:function(){},methods:{VideoShow:function(e){var n=this;t.ajax({url:"http://176.99.11.247/api/vi/radio/actualvideo/",type:"GET",success:function(t){var o=t.data.data[0].video.video.substring(32),a="";e?(a="?t="+t.data.data[0].video.time_duration+"&amp;",n.play=!0,n.videoid=o,n.actualsrc="http://www.youtube.com/embed/"+o+a+"?autoplay=1&amp"):n.videoid!=o&&(n.videoid=o,n.actualsrc="http://www.youtube.com/embed/"+o+a+"?autoplay=1&amp",console.log(n.videosrc))},error:function(t){console.log(t)}})},getTimer:function(){var e=this;t.ajax({url:"http://176.99.11.247/api/vi/radio/servertime/",type:"GET",success:function(t){var n=parseInt(t.data,10),o=(n-n%60)/60,a=n-60*o;e.timer=o+":"+a},error:function(t){console.log(t)}})}}}}).call(e,n("7t+N"))},AxDf:function(t,e){},E51W:function(t,e){},"Gp+1":function(t,e,n){"use strict";(function(t){e.a={name:"Timer",data:function(){return{interval:0,timer:"",seconds:""}},created:function(){var e=this;t.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),this.getTimer(),setInterval(function(){e.getTimer()},4e3),setInterval(function(){e.plusTimer()},1e3)},methods:{getTimer:function(){var e=this;t.ajax({url:"http://176.99.11.247/api/vi/radio/servertime/",type:"GET",success:function(t){e.seconds=parseInt(t.data,10)},error:function(t){console.log(t)}})},plusTimer:function(){if(this.seconds=this.seconds-1,this.seconds>=0){var t=parseInt(this.seconds,10),e=(t-t%60)/60,n=t-60*e,o="";n<10&&(o="0"),this.timer=e+":"+o+n}}}}}).call(e,n("7t+N"))},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App",created:function(){}},a,!1,function(t){n("aLkd")},null,null).exports,s=n("/ocq"),r=n("26/9"),u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mu-container",[n("mu-row",[n("mu-col",{attrs:{span:"6"}},[n("div",{staticClass:"grid-cell"},[n("mu-list",t._l(t.songs,function(e){return n("div",[n("mu-list-item",{attrs:{avatar:"",button:"",ripple:!1}},[n("mu-list-item-content",[n("mu-list-item-title",[t._v(t._s(e.selected_video.name))]),t._v(" "),n("mu-list-item-sub-title",[t._v(t._s(e.selected_video.author))])],1),t._v(" "),n("mu-list-item-action",[n("mu-list-item-title",[t._v(t._s(e.user_choices))])],1),t._v(" "),n("mu-list-item-action",[n("mu-button",{attrs:{icon:""},on:{click:function(n){return t.plusFoSong(e)}}},[t._v("+")])],1)],1)],1)}),0)],1)]),t._v(" "),n("mu-col",{attrs:{span:"6"}},[n("ActualVideo")],1)],1),t._v(" "),n("mu-row",t._l(t.alpabet,function(e){return n("div",[n("mu-col",{attrs:{span:"6"}},[n("mu-button",{attrs:{flat:"",color:"primary"},on:{click:function(n){return t.getSongs(e)}}},[t._v(t._s(e))])],1)],1)}),0),t._v(" "),n("mu-row",[n("mu-col",[n("mu-list",t._l(t.songs_list,function(e){return n("div",[n("mu-list-item",{attrs:{avatar:"",button:"",ripple:!1}},[n("mu-list-item-content",[n("mu-list-item-title",[t._v(t._s(e.name))]),t._v(" "),n("mu-list-item-sub-title",[t._v(t._s(e.author))])],1),t._v(" "),n("mu-list-item-action",[n("mu-button",{attrs:{color:"primary"},on:{click:function(n){return t.addSong(e)}}},[t._v("Добавить")])],1)],1)],1)}),0)],1)],1)],1)},staticRenderFns:[]};var c=function(t){n("u8kk")},l=n("VU/8")(r.a,u,!1,c,"data-v-9f7589bc",null).exports,m=n("Gp+1"),d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v(this._s(this.timer))])])},staticRenderFns:[]};var p=function(t){n("2iBU")},v={name:"Main",components:{SongsMenu:l,Timer:n("VU/8")(m.a,d,!1,p,"data-v-d8f3c762",null).exports,ActualVideo:n("4fmV").a},computed:{auth:function(){if(sessionStorage.getItem("auth_token"))return!0}},methods:{goLogin:function(){this.$router.push({name:"login"})},goRegistration:function(){this.$router.push({name:"registration"})},exit:function(){sessionStorage.removeItem("auth_token"),window.location="/"}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mu-container",[n("mu-appbar",{staticStyle:{width:"100%"},attrs:{color:"primary"}},[t._v("\n        Радиобудка\n        "),t.auth?n("Timer",{attrs:{slot:"right",flat:""},slot:"right"}):t._e(),t._v(" "),t.auth?n("mu-button",{attrs:{slot:"right",flat:""},on:{click:t.exit},slot:"right"},[t._v("Выход")]):n("mu-button",{attrs:{slot:"right",flat:""},on:{click:t.goLogin},slot:"right"},[t._v("Вход")]),t._v(" "),t.auth?t._e():n("mu-button",{attrs:{slot:"right",flat:""},on:{click:t.goRegistration},slot:"right"},[t._v("Регистрация")])],1),t._v(" "),n("mu-row",[t.auth?n("SongsMenu"):t._e()],1)],1)},staticRenderFns:[]};var g=n("VU/8")(v,f,!1,function(t){n("AxDf")},"data-v-5a017f80",null).exports,h=n("nKb+"),_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mu-container",{staticClass:"demo-container is-stripe"},[n("mu-row",[n("mu-col",{attrs:{span:"12"}},[n("H1",[t._v("Для входа в систему введите логин и пароль")])],1)],1),t._v(" "),n("mu-row",[n("mu-col",{attrs:{span:"12"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],attrs:{type:"text",placeholder:"Логин"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})])],1),t._v(" "),n("mu-row",[n("mu-col",{attrs:{span:"12"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])],1),t._v(" "),n("mu-row",[n("mu-col",{attrs:{span:"12"}},[n("button",{on:{click:t.setLogin}},[t._v("Войти")])])],1)],1)},staticRenderFns:[]};var w=function(t){n("WYwd")},b=n("VU/8")(h.a,_,!1,w,"data-v-9ead286e",null).exports,S=n("4jld"),y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mu-container",{staticClass:"demo-container is-stripe"},[n("mu-row",[n("mu-col",{attrs:{span:"12"}},[n("H3",[t._v("Для того чтобы зарегистрироваться")]),n("br"),t._v(" "),n("H3",[t._v("введите логин и пароль,")]),n("br"),t._v(" "),n("H3",[t._v("затем нажмите Зарегистрироваться")]),n("br")],1)],1),t._v(" "),n("mu-row",[n("mu-col",{attrs:{span:"12"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],attrs:{type:"text",placeholder:"Имя пользователя"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})])],1),t._v(" "),n("mu-row",[n("mu-col",{attrs:{span:"12"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])],1),t._v(" "),n("mu-row",[n("mu-col",{attrs:{span:"12"}},[n("button",{on:{click:t.setLogin}},[t._v("Зарегистрироваться")])])],1)],1)},staticRenderFns:[]};var x=function(t){n("gdhE")},k=n("VU/8")(S.a,y,!1,x,"data-v-42436f45",null).exports;o.a.use(s.a);var T=new s.a({routes:[{path:"/",name:"main",component:g},{path:"/login",name:"login",component:b},{path:"/registration",name:"registration",component:k}]}),V=n("aFc6");n("E51W");o.a.use(V.a),o.a.config.productionTip=!1,new o.a({el:"#app",router:T,components:{App:i},template:"<App/>"})},WYwd:function(t,e){},aLkd:function(t,e){},gdhE:function(t,e){},"nKb+":function(t,e,n){"use strict";(function(t){e.a={name:"Login",data:function(){return{login:"",password:""}},methods:{setLogin:function(){var e=this;t.ajax({url:"http://176.99.11.247/auth/token/create/",type:"POST",data:{username:this.login,password:this.password},success:function(t){alert("Спасибо что зашли!"),sessionStorage.setItem("auth_token",t.data.attributes.auth_token),e.$router.push({name:"main"})},error:function(t){400===t.status&&alert("Логин или пароль введены неверно!")}})}}}}).call(e,n("7t+N"))},tle6:function(t,e){},u8kk:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a7bb38f8d62b24d45171.js.map